<!-- Media Player Container -->
<div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"
     data-controller="waveform"
     data-waveform-url-value="<%= @recording.media.url if @recording&.media&.attached? %>"
     data-waveform-regions-url-value="<%= regions_voice_recording_path(@recording) if @recording %>">

  <!-- Video Display (if video) -->
  <% if @recording&.media&.video? %>
    <div class="w-full bg-gray-900">
      <%= video_tag(@recording.media.url,
                    class: "mx-auto max-h-[300px]",
                    data: { waveform_target: "video" },
                    crossorigin: "anonymous") %>
    </div>
  <% end %>

  <!-- Waveform Display -->
  <div class="p-4">
    <% if @recording&.media&.attached? %>
      <div data-waveform-target="waveform" class="w-full h-24"></div>
    <% else %>
      <p class="text-gray-500 text-center py-4">No media file attached</p>
    <% end %>
  </div>

  <!-- Main Controls -->
  <div class="border-t border-gray-200 p-4">
    <div class="flex items-center justify-between">
      <!-- Left Controls Group -->
      <div class="flex items-center gap-6">
        <!-- Play/Pause Button -->
        <button data-waveform-target="playButton"
                data-action="click->waveform#play"
                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 min-w-[100px] justify-center disabled:opacity-50"
                disabled>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          <span>Play</span>
        </button>

        <!-- Time Display -->
        <div class="flex items-center gap-2 text-gray-600 min-w-[80px]">
          <span data-waveform-target="timeDisplay" class="font-mono">0:00</span>
        </div>
      </div>

      <!-- Center Controls Group -->
      <div class="flex items-center gap-6">
        <!-- Playback Speed -->
        <div class="flex items-center gap-2">
          <label for="speed" class="text-gray-600 whitespace-nowrap">Speed:</label>
          <select id="speed"
                  data-waveform-target="speed"
                  data-action="change->waveform#changeSpeed"
                  class="form-select rounded-md border-gray-300 text-sm">
            <option value="0.5">0.5x</option>
            <option value="0.75">0.75x</option>
            <option value="1.0" selected>1.0x</option>
            <option value="1.25">1.25x</option>
            <option value="1.5">1.5x</option>
            <option value="2.0">2.0x</option>
          </select>
        </div>

        <!-- Zoom Control -->
        <div class="flex items-center gap-2">
          <label for="zoom" class="text-gray-600 flex items-center gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path d="M5 8a1 1 0 011-1h1V6a1 1 0 012 0v1h1a1 1 0 110 2H9v1a1 1 0 11-2 0V9H6a1 1 0 01-1-1z" />
              <path fill-rule="evenodd" d="M2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8zm6-4a4 4 0 100 8 4 4 0 000-8z" clip-rule="evenodd" />
            </svg>
          </label>
          <input type="range"
                 id="zoom"
                 data-action="input->waveform#zoom"
                 class="w-24 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                 min="10"
                 max="500"
                 value="250">
        </div>
      </div>

      <!-- Right Controls Group -->
      <% if @regions.present? && controller.action_name == "index" %>
        <div class="flex items-center gap-4">
          <label class="flex items-center gap-2">
            <input type="checkbox"
                   data-waveform-target="gaeSubs"
                   checked
                   class="form-checkbox h-4 w-4 text-blue-600 rounded">
            <span class="text-gray-700">Ga</span>
          </label>
          <label class="flex items-center gap-2">
            <input type="checkbox"
                   data-waveform-target="engSubs"
                   checked
                   class="form-checkbox h-4 w-4 text-blue-600 rounded">
            <span class="text-gray-700">En</span>
          </label>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Subtitle Display, Disabled for now -->
  <% if false # @regions.present? %>
    <div class="border-t border-gray-200 p-4 bg-gray-50">
      <div class="space-y-2 text-center">
        <p data-waveform-target="transcription" class="text-xl font-medium text-gray-900">Br√∫igh seinm</p>
        <p data-waveform-target="translation" class="text-gray-600 italic">Press play</p>
      </div>
    </div>
  <% end %>
</div>
