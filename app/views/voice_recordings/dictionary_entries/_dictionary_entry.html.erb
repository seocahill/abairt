<tr data-controller="entry" class="bg-white border-b dark:bg-gray-800 dark:border-gray-700" id="<%= dom_id(entry) %>" data-entry-seek-value="<%= entry.region_start %>" data-entry-id-value="<%= entry.id %>">
  <td class="px-6 py-4">
    <div class="flex space-x-2">
      <!-- Play button for individual entry media -->
      <button class="text-blue-600 hover:text-blue-800"
              data-controller="audio-player"
              data-action="audio-player#play"
              data-audio-player-url-value="<%= url_for(entry.media) if entry.media.attached? %>"
              data-audio-player-transcription-value="<%= entry.word_or_phrase %>"
              data-audio-player-translation-value="<%= entry.translation %>"
              title="Play this entry's audio">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
        </svg>
      </button>
      
      <!-- Seek button to jump to this region in the main waveform -->
      <button class="text-green-600 hover:text-green-800"
              data-action="entry#seek"
              title="Seek to this region in waveform">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>
  </td>
  <td class="px-6 py-4">
    <%= render "voice_recordings/dictionary_entries/inline_edit", model: entry, method: :speaker_id, current_user: current_user do %>
      <% if entry.speaker_id %>
        <%= link_to_unless policy(entry).edit?, entry.speaker&.name, user_path(entry.speaker), class: "cursor-pointer hover:text-blue-700 hover:underline", data: { turbo_frame: "_top" } %>
      <% else %>
        "Choose speaker"
      <% end %>
    <% end %>
  </td>
  <td class="px-6 py-4">
    <%= render "voice_recordings/dictionary_entries/inline_edit", model: entry, method: :word_or_phrase, current_user: current_user do %>
      <%= entry.word_or_phrase.present? ? entry.word_or_phrase : "Add word or phrase" %>
    <% end %>
  </td>
  <td class="px-6 py-4">
    <%= render "voice_recordings/dictionary_entries/inline_edit", model: entry, method: :translation, current_user: current_user do %>
      <%= entry.translation.present? ? entry.translation : "Add translation" %>
    <% end %>
  </td>
  <td class="px-6 py-4">
    <% if entry.translator %>
      <%= link_to_unless policy(entry).edit?, entry.translator.name, entry.translator ? user_path(entry.translator) : "#", class: "cursor-pointer hover:text-blue-700 hover:underline", data: { turbo_frame: "_top" } %>
    <% else %>
      <span class="text-gray-500">No translator</span>
    <% end %>
  </td>
  <td class="px-6 py-4">
    <% if policy(entry).update? %>
      <% if ["low", "fair"].include?(entry.quality) %>
        <%= button_to "Unreviewed", voice_recording_dictionary_entry_path(entry.voice_recording, entry),
            method: :patch,
            params: { dictionary_entry: { quality: "good" } },
            class: "px-3 py-1 text-sm font-medium text-white bg-orange-500 rounded hover:bg-orange-600",
            form: { data: { turbo: true } } %>
      <% else %>
        <%= button_to "Correct", voice_recording_dictionary_entry_path(entry.voice_recording, entry),
            method: :patch,
            params: { dictionary_entry: { quality: "fair" } },
            class: "px-3 py-1 text-sm font-medium text-white bg-blue-500 rounded hover:bg-blue-600",
            form: { data: { turbo: true } } %>
      <% end %>
    <% else %>
      <span class="text-gray-600"><%= entry.quality.present? ? entry.quality : "No quality set" %></span>
    <% end %>
  </td>
  <% if current_user && entry.user_id == current_user.id %>
    <td class="px-6 py-4">
      <%= link_to dictionary_entry_path(entry) do %>
        <i data-feather="eye"></i>
      <% end %>
    </td>
    <td class="px-6 py-4">
      <%= link_to dictionary_entry_path(entry), method: :delete, data: { "turbo-method": :delete, "turbo-confirm": 'Are you sure?' } do %>
        <i data-feather="trash"></i>
      <% end %>
    </td>
  <% end %>
</tr>
