<div data-controller="rang" data-rang-meeting-id-value="abairt-<%= @rang.meeting_id %>" data-rang-media-value="<%= url_for(@rang.media) if @rang.media.attached? %>">
  <div id="meet"></div>
  <div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6">
      <h3 class="text-lg leading-6 font-medium text-gray-900 truncate">
        Rang: <%= truncate(@rang.name, length: 50) %>
        <% if @rang.url.present? %>
          <small><%= link_to "Oscail Alt i bhfuinneog nua", @rang.url, target: '_blank' %></small>
        <% end %>
      </h3>
      <p class="mt-1 max-w-2xl text-sm text-gray-500">
        created <%= @rang.created_at.to_s(:short) %>
        <%= link_to 'Edit rang', edit_rang_path(@rang), class: "inline-flex items-center h-8 px-4 m-2 text-sm text-indigo-100 transition-colors duration-150 bg-gray-700 rounded-lg focus:shadow-outline hover:bg-gray-800" if current_user %>
        <button data-action="click->rang#hide" class="h-8 px-4 m-2 text-sm text-gray-100 transition-colors duration-150 bg-gray-700 rounded-lg focus:shadow-outline hover:bg-gray-800">Modh léitheoireachta ar / as</button>
        <button data-action="click->rang#startMeeting" class="h-8 px-4 m-2 text-sm text-gray-100 transition-colors duration-150 bg-blue-400 rounded-lg focus:shadow-outline hover:bg-gray-800">Tosaigh cruinniú</button>
        <div id="waveform"></div>
      </p>
      <% if @rang.media.attached? && (@rang.media.audio? ||  @rang.media.video?) %>
          <button id="play-pause-button" data-action="click->rang#play" class="h-8 px-4 m-2 text-sm text-blue-100 transition-colors duration-150 bg-blue-700 rounded-lg focus:shadow-outline hover:bg-blue-800">Play / Pause</button>
        <% end %>
      <% if current_user %>
        <%= turbo_frame_tag "new_dictionary_entry", src: new_rang_dictionary_entry_path(@rang), target: "_top" %>
      <% end %>
    </div>
  </div>
  <div class="table w-full mt-10">
    <div class="table-header-group">
      <div class="table-row">
        <div class="table-cell"><b>Focal nó abairt</b></div>
        <div data-target="rang.cell" class="table-cell"><b>Aistriúchán</b></div>
        <div data-target="rang.cell" class="table-cell"><b>Notaí</b></div>
        <div data-target="rang.cell" class="table-cell"><b>Meáin</b></div>
        <div data-target="rang.cell" class="table-cell"></div>
        <div data-target="rang.cell" class="table-cell"></div>
      </div>
    </div>
    <% if current_user %>
      <div id="current_user_dictionary_entries" class="table-row-group">
        <%= render @rang.dictionary_entries %>
      </div>
    <% else %>
      <%= turbo_stream_from "dictionary_entries" %>
      <div id="dictionary_entries" class="table-row-group">
        <%= render @rang.dictionary_entries %>
      </div>
    <% end %>
  </div>
</div>