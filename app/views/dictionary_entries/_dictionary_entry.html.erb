<tr class="bg-white" id="<%= dom_id(entry) %>" data-controller="entry">
  <td class="py-2 px-4 border-gray-200 w-1/4">
    <% if current_user %>
      <%= render "dictionary_entries/inline_edit", model: entry, method: :word_or_phrase, current_user: current_user do %>
        <%= entry.word_or_phrase.present? ? entry.word_or_phrase : "Add word or phrase"  %>
      <% end %>
    <% else %>
      <span data-popover-target="popover-default"><%= entry.word_or_phrase %></span>
      <div data-popover id="popover-default" role="tooltip" class="absolute z-10 invisible inline-block w-64 text-sm text-gray-500 transition-opacity duration-300 bg-white border border-gray-200 rounded-lg shadow-sm opacity-0 dark:text-gray-400 dark:border-gray-600 dark:bg-gray-800">
    <div class="px-3 py-2 bg-gray-100 border-b border-gray-200 rounded-t-lg dark:border-gray-600 dark:bg-gray-700">
        <h3 class="font-semibold text-gray-900 dark:text-white">Popover title</h3>
    </div>
    <div class="px-3 py-2">
        <p>And here's some amazing content. It's very engaging. Right?</p>
    </div>
    <div data-popper-arrow></div>
</div>
    <% end %>
  </td>
  <td class="py-2 px-4 border-gray-200 w-1/4">
    <%= render "dictionary_entries/inline_edit", model: entry, method: :translation, current_user: current_user do %>
      <%= entry.translation.present? ? entry.translation : "Add translation" %>
    <% end %>
  </td>
  <td class="py-2 px-4 text-center border-gray-200 w-1/4">
    <% entry.tag_list.each do |tag| %>
      <%= link_to tag, dictionary_entries_path(tag: tag), class: "hover:text-blue hover:underline rounded-full px-2 py-1 bg-gray-200 hover:bg-gray-300" %>
    <% end %>
  </td>
  <td data-controller="entry" class="text-center py-2 px-4 border-gray-200 w-1/12">
    <% if entry.media.attached? %>
      <a href="#" data-action="entry#play" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
        <audio src="<%= entry.media.url %>"></audio>
        play
      </a>
    <% else %>
      <% if current_user %>
        <%= form_with(model: entry) do |form| %>
          <%= render 'dictionary_entries/recorder', form: form, autosave: true %>
        <% end %>
      <% else %>
        <a href="#" disabled class='bg-grey-500 hover:bg-grey-700 text-white font-bold py-2 px-4 rounded hover:cursor-pointer'>No media</a>

      <% end %>
    <% end %>
  </td>
  <td class="py-2 px-4 text-center border-gray-200 w-1/12">
    <% if current_user %>
      <%= button_to word_list_dictionary_entries_path, method: :post, form: { data: { turbo_confirm: 'Are you sure?' } }, params: { word_list_dictionary_entry: { dictionary_entry_id: entry.id, word_list_id: starred.id }}, class: "flex items-center" do %>
        <% if starred && starred.dictionary_entries.include?(entry) %>
          <i style="fill:gold;" data-feather="star"></i>
        <% else %>
          <i data-feather="star"></i>
        <% end %>
      <% end %>
    <% end %>
  </td>
  <td>
    <% if current_user %>
      <select class="block py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm mt-2" data-controller="list">
        <% current_user.own_lists.where(starred: nil).each do |list| %>
          <option value="default" selected="selected">Add to list</option>
          <option value="<%= list.id %>"><%= list.name %></option>
        <% end %>
        </select>
    <% end %>
  </td>
  <td class="py-2 px-4 text-center border-gray-200 w-1/12">
    <% if current_user && entry.speaker_id == current_user.id %>
      <%= link_to dictionary_entry_path(entry), method: :delete, data: { "turbo-method": :delete, "turbo-confirm": 'Are you sure?' }, class: "" do %>
        <i data-feather="trash"></i>
      <% end %>
    <% end %>
  </td>
</tr>
