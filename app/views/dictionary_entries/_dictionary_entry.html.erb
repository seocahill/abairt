<div class="bg-white rounded-lg shadow p-4 hover:shadow-md transition-all duration-300">
  <div class="flex items-start justify-between">
    <div class="flex-1">
      <!-- Word/Phrase and Translation -->
      <div class="mb-2">
        <p class="text-lg font-medium text-gray-900"><%= entry.word_or_phrase %></p>
        <p class="text-gray-600 italic"><%= entry.translation %></p>
      </div>

      <!-- Tags and Recording Link -->
      <div class="flex flex-wrap items-center gap-2 text-sm">
        <% if entry.voice_recording %>
          <%= link_to voice_recording_path(entry.voice_recording), class: "text-blue-600 hover:text-blue-800 flex items-center" do %>
            <svg class="w-4 h-4 mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
              <path d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4z" />
              <path d="M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z" />
            </svg>
            From Recording
          <% end %>
        <% end %>

        <% entry.tags.each do |tag| %>
          <%= link_to dictionary_entries_path(tag: tag.name),
              class: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200",
              data: { turbo_frame: "entries" } do %>
            <%= tag.name %>
          <% end %>
        <% end %>
      </div>
    </div>

    <!-- Play Button -->
    <% if entry.media.attached? %>
      <button class="flex-shrink-0 bg-blue-100 text-blue-600 hover:bg-blue-200 p-2 rounded-full transition-colors duration-200"
              data-controller="audio-player"
              data-action="audio-player#play"
              data-audio-player-url-value="<%= url_for(entry.media) %>"
              data-audio-player-transcription-value="<%= entry.word_or_phrase %>"
              data-audio-player-translation-value="<%= entry.translation %>">
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
        </svg>
      </button>
    <% elsif current_user %>
      <button class="flex-shrink-0 bg-blue-100 text-blue-600 hover:bg-blue-200 p-2 rounded-full transition-colors duration-200"
              data-controller="entry"
              data-action="entry#synth"
              data-audio-text="<%= entry.word_or_phrase %>">
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path d="M10 3.75a.75.75 0 00-1.264-.546L4.703 7H3.167a.75.75 0 00-.75.75v4.5c0 .414.336.75.75.75h1.536l4.033 3.796A.75.75 0 0010 16.25V3.75zM15.95 10a4.25 4.25 0 00-1.227-3.034.75.75 0 00-1.071 1.047A2.75 2.75 0 0114.5 10c0 .76-.31 1.445-.809 1.938a.75.75 0 001.071 1.047A4.25 4.25 0 0015.95 10z"/>
        </svg>
      </button>
    <% end %>
  </div>
</div>
