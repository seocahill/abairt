<div class="container mx-auto px-4 py-8">
  <div class="mb-6 flex items-center justify-between">
    <%= link_to "â† Back to User", admin_user_path(@user), class: "text-gray-600 hover:text-gray-900" %>
  </div>

  <div class="bg-white shadow rounded-lg overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
      <h1 class="text-2xl font-bold text-gray-900">Edit User</h1>
    </div>

    <%= form_with model: [:admin, @user], local: true, class: "px-6 py-6" do |form| %>
      <% if @user.errors.any? %>
        <div class="mb-4 bg-red-50 border border-red-200 rounded-lg p-4">
          <h3 class="text-sm font-medium text-red-800 mb-2">
            <%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:
          </h3>
          <ul class="list-disc list-inside text-sm text-red-700">
            <% @user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Left Column -->
        <div class="space-y-6">
          <div>
            <%= form.label :name, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.text_field :name, class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
          </div>

          <div>
            <%= form.label :email, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.email_field :email, class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
          </div>

          <div>
            <%= form.label :role, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :role, 
                options_for_select(User.roles.keys.map { |r| [r.humanize, r] }, @user.role),
                {},
                { class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" } %>
          </div>

          <div>
            <%= form.label :about, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.text_area :about, rows: 4, class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
          </div>
        </div>

        <!-- Right Column -->
        <div class="space-y-6">
          <div>
            <%= form.label :voice, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :voice,
                options_for_select(User.voices.keys.map { |v| [v.humanize, v] }, @user.voice),
                { include_blank: "Not specified" },
                { class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" } %>
          </div>

          <div>
            <%= form.label :dialect, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :dialect,
                options_for_select(User.dialects.keys.map { |d| [d.humanize, d] }, @user.dialect),
                { include_blank: "Not specified" },
                { class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" } %>
          </div>

          <div>
            <%= form.label :ability, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.select :ability,
                options_for_select(User.abilities.keys.map { |a| [a.humanize, a] }, @user.ability),
                { include_blank: "Not specified" },
                { class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" } %>
          </div>

          <div>
            <%= form.label :address, class: "block text-sm font-medium text-gray-700 mb-1" %>
            <%= form.text_field :address, class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" %>
          </div>

          <div>
            <%= form.label :confirmed, class: "flex items-center" do %>
              <%= form.check_box :confirmed, class: "h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" %>
              <span class="ml-2 text-sm font-medium text-gray-700">Confirmed</span>
            <% end %>
            <p class="mt-1 text-xs text-gray-500">Check this to confirm the user's account</p>
          </div>
        </div>
      </div>

      <div class="mt-6 pt-6 border-t border-gray-200 flex justify-end gap-3">
        <%= link_to "Cancel", admin_user_path(@user), class: "px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50" %>
        <%= form.submit "Update User", class: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700" %>
      </div>
    <% end %>
  </div>
</div>

